---
import data from '../data/data.json';
const { art } = data;

// Build alternating wave rows:
// 3,2,1 then 1,2,3, then repeat.
const rows: typeof art[] = [];
let i = 0;
let descending = true;
while (i < art.length) {
	const pattern = descending ? [3, 2, 1] : [1, 2, 3];
	for (const rowSize of pattern) {
		if (i >= art.length) break;
		rows.push(art.slice(i, i + rowSize));
		i += rowSize;
	}
	descending = !descending;
}
---
<!-- Art -->
<section id="art">
    <h2>art</h2>
    <div class="art-wave">
        {rows.map((row) => (
            <div class="art-row" style={`grid-template-columns: repeat(${row.length}, 260px);`}>
                {row.map((piece) => (
                    <div class="art-item">
                        <img src={piece.image} alt={piece.title} loading="lazy" />
                        <span class="art-title">{piece.title}</span>
                    </div>
                ))}
            </div>
        ))}
    </div>
    <div class="art-grid">
        {art.map((piece) => (
            <div class="art-item">
                <img src={piece.image} alt={piece.title} loading="lazy" />
                <span class="art-title">{piece.title}</span>
            </div>
        ))}
    </div>
</section>

<style>
    /* Art */
	.art-wave {
		display: block;
	}

	.art-row {
		display: grid;
		gap: 16px;
		margin-bottom: 16px;
	}

	.art-grid {
		display: none;
		grid-template-columns: repeat(2, 1fr);
		gap: 16px;
	}

	.art-item {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.art-item img {
		width: 100%;
		aspect-ratio: 1;
		object-fit: cover;
		border-radius: 6px;
		background: #f5f5f5;
	}

	.art-title {
		font-size: 13px;
		opacity: 0.7;
	}

	@media screen and (max-width: 600px) {
		.art-wave {
			display: none;
		}

		.art-grid {
			display: grid;
		}
	}
</style>
